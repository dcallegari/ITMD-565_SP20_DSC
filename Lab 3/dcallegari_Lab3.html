<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link href="https://fonts.googleapis.com/css?family=Ubuntu&display=swap" rel="stylesheet">
        <link rel="shortcut icon" type="image/png" href="images/favicon.ico">
        <link rel="stylesheet" type="text/css" href="style.css">
        <title>Sales Tax Calculator</title>
    </head>

    <body>
        <div id="header">
            <p>ITMD-565 Lab 1 - Daniel S Callegari - dcallegari@hawk.it.edu</p>
            <h1>Sales Tax Calculator</h1>
        </div>
        
        <div id="calculator">
            <p>Enter Subtotal and Tax Rate and click the Calculate button to show the sales tax amount and total. Click the clear button to clear out all form fields. Tax rate should be a percentage but do not enter a % sign in the Tax Rate box.</p>
            
            <form id="calc">
            <p>Sub Total: <input type="text" id="sub" value=""><br></p>
                <p>Rate:   <input type="text" id="rate" value=""><br></p>
                <p>Sales Tax:  <input type="text" id="tax" value=""
                disabled><br></p>
                <p>Total:      <input type="text" id="total" value="" disabled><br></p>
                
                <p>
                    <button id="start">Calculate Tax and Total</button>
                    <button id="clean">Clear</button>
                </p>
            </form>
            
        </div>

        <img src="images/salestaxcalc.jpg" alt="Tax Calculator">

        <p id="footer">&copy; 2020 Daniel S Callegari | dcallegari@hawk.iit.edu</p>

        <script type="text/javascript">
            function loader() {
                document.getElementById("start").addEventListener("click", calcTax);
                document.getElementById("clean").addEventListener("click", resetForm);
            }
            window.addEventListener("load", loader());

            function calcTax() {
                let nSub = document.getElementById("sub").value;
                if (nSub <= 0) {
                    alert("Subtotal cannot be less than $0.00 (a negative value). Please enter a valid amount.");
                    chk1 = false;
                }
                else {
                    chk1 = true;
                }

                let nRate = document.getElementById("rate").value;
                if (nRate < 0 || nRate >= 20) {
                    alert("Tax Rate does not fall between 0% and 20%. Please enter an appropriate value.");
                    chk2 = false;
                }
                else {
                    chk2 = true;
                }

                if (chk1 == true && chk2 == true) {
                    let nTax = Number(nSub) * Number(nRate/100);
                    document.getElementById("tax").value = nTax;
                    let nTotal = Number(nSub) + Number(nTax);
                    document.getElementById("total").value = nTotal;
                    event.preventDefault();
                }
                else {
                    alert("Please verify all values before resubmitting! Else, use Clear to reset all fields.");
                    document.getElementById("tax").value = '';
                    document.getElementById("total").value = '';
                    event.preventDefault();
                }
            }

            function resetForm() {
                document.getElementById("calc").reset();
                document.getElementById("sub").focus();
                event.preventDefault();
            }
        </script>
    </body>
</html>